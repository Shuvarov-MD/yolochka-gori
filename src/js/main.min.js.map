{"version":3,"sources":["closePopup.js","createRequest.js","maskPhone.js","sendForm.js","showPopup.js","showThanks.js","toggleMenu.js"],"names":["closePopup","document","querySelectorAll","forEach","item","classList","remove","popupWrapper","querySelector","addEventListener","event","target","closest","body","key","createRequest","data","fetch","method","headers","Content-Type","JSON","stringify","maskPhone","selector","masked","arguments","length","undefined","mask","keyCode","template","def","replace","val","this","value","i","newValue","a","charAt","indexOf","slice","reg","substr","RegExp","test","type","_iterator","_createForOfIteratorHelper","s","_step","n","done","elem","err","e","f","sendForm","forms","statusMessage","createElement","innerHTML","inputName","inputTel","button","buttonText","preventDefault","textContent","style","border","appendChild","add","formData","FormData","Object","fromEntries","then","response","ok","Error","showThanks","error","console","setTimeout","showPopup","popupBlock","concat","popupThanks","toggleMenu","menuSpan","menuList","toggle","menuActive"],"mappings":"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","file":"main.min.js","sourcesContent":["const closePopup = () => {\r\n  const popupActive = document.querySelectorAll('.popup--active');\r\n\r\n  popupActive.forEach(item => item.classList.remove('popup--active'));\r\n};\r\n\r\nconst popupWrapper = document.querySelector('.popup__wrapper');\r\n\r\npopupWrapper.addEventListener('click', event => {\r\n  if (event.target.closest('.popup__close')  || !event.target.closest('.popup__block')) {\r\n    closePopup();\r\n  }\r\n});\r\n\r\ndocument.body.addEventListener('keydown', event => {\r\n  if (event.key === \"Escape\" && document.querySelector('.popup--active')) {\r\n    closePopup();\r\n  }\r\n});\r\n","const createRequest = data => fetch('./php/server.php', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  },\r\n  body: JSON.stringify(data)\r\n});\r\n","const maskPhone = (selector, masked = '+7 (___) ___-__-__') => {\r\n  const elems = document.querySelectorAll(selector);\r\n\r\n  function mask(event) {\r\n    const keyCode = event.keyCode;\r\n    const template = masked,\r\n      def = template.replace(/\\D/g, \"\"),\r\n      val = this.value.replace(/\\D/g, \"\");\r\n\r\n    let i = 0,\r\n      newValue = template.replace(/[_\\d]/g, a => (i < val.length ? val.charAt(i++) || def.charAt(i) : a));\r\n    i = newValue.indexOf(\"_\");\r\n\r\n    if (i !== -1) {\r\n      newValue = newValue.slice(0, i);\r\n    }\r\n\r\n    let reg = template.substr(0, this.value.length).replace(/_+/g,\r\n      a => \"\\\\d{1,\" + a.length + \"}\").replace(/[+()]/g, \"\\\\$&\");\r\n    reg = new RegExp(\"^\" + reg + \"$\");\r\n\r\n    if (!reg.test(this.value) || this.value.length < 5 || keyCode > 47 && keyCode < 58) {\r\n      this.value = newValue;\r\n    }\r\n\r\n    if (event.type === \"blur\" && this.value.length < 5) {\r\n      this.value = \"\";\r\n    }\r\n  }\r\n\r\n  for (const elem of elems) {\r\n    elem.addEventListener(\"input\", mask);\r\n    elem.addEventListener(\"focus\", mask);\r\n    elem.addEventListener(\"blur\", mask);\r\n  }\r\n};\r\n\r\nmaskPhone('input[type=\"tel\"]');\r\n","const sendForm = () => {\r\n  const forms = document.querySelectorAll('form'),\r\n    statusMessage = document.createElement('div');\r\n\r\n  statusMessage.innerHTML = `\r\n    <div class='sk-bounce-1 sk-child'></div>\r\n    <div class='sk-bounce-2 sk-child'></div>\r\n    <div class='sk-bounce-3 sk-child'></div>`;\r\n\r\n  forms.forEach(item => {\r\n    const inputName = item.querySelector('input[type=\"text\"]'),\r\n      inputTel = item.querySelector('input[type=\"tel\"]'),\r\n      button = item.querySelector('.button__text ');\r\n\r\n    inputName.addEventListener('input', event => {\r\n      event.target.value = event.target.value.replace(/[^А-Яа-яЁё\\s]/, '');\r\n    });\r\n\r\n    item.addEventListener('submit', event => {\r\n      event.preventDefault();\r\n\r\n      if (inputTel.value.length === 18) {\r\n        const buttonText = button.textContent;\r\n        inputTel.style.border = '';\r\n\r\n        button.textContent = '';\r\n        button.appendChild(statusMessage);\r\n        statusMessage.classList.add('sk-three-bounce');\r\n\r\n        let formData = new FormData(item);\r\n        formData = Object.fromEntries(formData);\r\n\r\n        createRequest(formData).then(response => {\r\n          if (!response.ok) {\r\n            throw new Error('Ответ сети был не ok');\r\n          } else if (item.closest('.popup__block.popup--active')) {\r\n            item.closest('.popup__block').classList.remove('popup--active');\r\n            item.closest('.popup__wrapper').classList.remove('popup--active');\r\n          }\r\n\r\n          showThanks();\r\n          statusMessage.classList.remove('sk-three-bounce');\r\n          button.textContent = buttonText;\r\n        }).catch(error => {\r\n          console.error(error);\r\n          button.textContent = 'Ошибка...';\r\n\r\n          setTimeout(() => {\r\n            button.textContent = buttonText;\r\n          }, 2000);\r\n        });\r\n\r\n        inputName.value = '';\r\n        inputTel.value = '';\r\n      } else {\r\n        inputTel.style.border = '1px solid red';\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nsendForm();\r\n","const showPopup = selector => {\r\n  const popupWrapper = document.querySelector('.popup__wrapper'),\r\n    popupBlock = document.querySelector(`.popup__block--${selector}`);\r\n\r\n  popupWrapper.classList.add('popup--active');\r\n  popupBlock.classList.add('popup--active');\r\n};\r\n\r\ndocument.querySelectorAll('.callback').forEach(item => {\r\n  item.addEventListener('click', () => showPopup('callback'));\r\n});\r\n\r\ndocument.querySelectorAll('.request').forEach(item => {\r\n  item.addEventListener('click', () => showPopup('request'));\r\n});\r\n\r\ndocument.querySelectorAll('.set').forEach(item => {\r\n  item.addEventListener('click', () => showPopup('set'));\r\n});\r\n","function showThanks() {\r\n  const popupWrapper = document.querySelector('.popup__wrapper'),\r\n    popupThanks = document.querySelector('.popup__block--thanks');\r\n\r\n  popupWrapper.classList.add('popup--active');\r\n  popupThanks.classList.add('popup--active');\r\n\r\n  setTimeout(() => {\r\n    popupWrapper.classList.remove('popup--active');\r\n    popupThanks.classList.remove('popup--active');\r\n  }, 2000);\r\n}\r\n","const toggleMenu = () => {\r\n  const menuSpan = document.querySelectorAll('.menu__span'),\r\n    menuList = document.querySelector('.menu__list');\r\n\r\n  menuSpan.forEach(item => {\r\n    item.classList.toggle('menu__span--active');\r\n  });\r\n  menuList.classList.toggle('menu__list--active');\r\n};\r\n\r\ndocument.body.addEventListener('click', event => {\r\n  const menuActive = document.querySelector('.menu__list--active');\r\n\r\n  if (event.target.closest('.menu__burger') || event.target.closest('.menu__item')) {\r\n    toggleMenu();\r\n  } else if (menuActive && !event.target.closest('.menu__list--active')) {\r\n    toggleMenu();\r\n  }\r\n});\r\n"]}